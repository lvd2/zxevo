Техническое задание на Пентагон Эволюшн (Пентагон Плюс)
=======================================================

Решил немного побывать в роли заказчика и обрисовать, чтобы понимать что нужно.
? - знаокм вопроса помечены пункты требующие дополнительного обсуждения.


1. Главные задачи.
------------------

- Минимальная стоимость;
- Минимальное количество деталей;
- Совместимость с пентагоном128 и пентагоном1024(версии 2.2);
- Легкость в сборке и наладке;
- Простота установки в стандартный корпус со стандртным питанием;
- Стандартизированные интерфейсы периферии;
- Набор деталей обязан обеспечить быструю разработку в минимум итераций производства альфа версий железа;
- Плата должна содержать как минимум два слота расширения по стандарту ZXBUS


Отсуда как следствие следует:
- двухслойная плата;
- корпус от ПЦ, самым перспективным считаю мини-АТХ;
- поддержка питания АТ и АТХ ( оставить пины для питания +5в,+12в - для пропиретарных БП);
- использовать доступные и дешевые ФПГА толерантные к +5в с большим количестовм ячеек (Аltera Acex);
- использовать контроллер достаточной емкости для хранения прошивки ФПГА и желательно толерантный к +5в (AtMega128);
- использование стандартной периферии - клавиатура и мышь PS/2, джойстики доступные на рынке (Sega?), 
  видеовывод (PAL comp, svideo, vga?), дисководы;
- минимум 1024кб ОЗУ, минимум 64кб ПЗУ;
- дополнительная периферия SD, IDE (по схеме НЕМО), RS232.


2. Периферия.
-------------

В этом разделе рассматривается вопросы связанные с периферией.

2.1. Звук.
---------
Звук должен обеспечивать полноту проигрывания и не вызывать притензий у музыкантов.
Т.е. звук не должен производится в режиме эмуляции, поэтому в разработке используем стандартный
доступный в продаже на текущий момент чип - YM2149F.
На плате должен быть расположен предусилитель, обеспечивающий достаточно чистое звучание. Вывод звука 
должен сделан быть на стандарный 3.5 аудиоразьем.
Дополнительные требования:
- вывод должен быть смикширован с бипером;
- 3.5 аудиоразьем должен быть спаралелен с пинами (для кастомерского дизайна);
- должен предусмотрен свободный вход для микширования звука от внешней линии 
  (например от CDпривода или платы NeoGS);
- должно предусматриваться установка распространенных чипов (AY38910, AY38912?).

Должен предусмотрен вывод биппера (4пин) для подключение стандартного корпусного динамика.

2.2. Клавиатура + Джойстик/Пинпады.
----------------
Платой должны поддерживаться стандартные клавиатуры доступные на рынке (PS/2). 
Причем работа должна обеспечиваться в безвайтовом режиме.
Дополнительно должна обеспечена поддержка стандартной клавиатуры.
Должно обеспечиваться поддержка джойстка/пинпада по стандарту кемпстон. 
Джойстик/пинпад доступный на рынке (Sega?).

2.3. Мышь.
----------
Платой должны поддерживаться стандартные мыши доступные на рынке (PS/2). 
Стандарт взаимодействия kempston mouse.

2.4. Видео выход.
-----------------
Минимальные требования - RGBS, композитный сигнал.
По возможности: svideo, VGA?

2.5. Интерфейс дисковода.
-------------------------
Стандартный 32 пин, с поддержкой как минимум двух дисководов. 
Должен обеспечивать прокачку дисководов с нагрузочной матрицой 330ом по входу.

2.6. Принтерный интерфейс.
--------------------------
Сделать интерфейс минимально задействующий дополнительные пины и детали 
(принтер используется максимум у 0.5% спектрумистов). 
Как вариант на рассмотрения предлагаю стандарт КАЯ с использования порта ввода/вывода звукового чипа.

2.7. IDE.
---------
Должен быть набортно один канал IDE с поддержкой двух устройств (master/slave).
Интерфейс должен работать по стандарту Нэмо.

2.8. SD card.
-------------
Должна быть поддержка как минимум одной SD карты. Интерфейс по стандарту ZController.

2.9. RS232.
-----------
Интерфейс рекомендуется выбрать какойнить из стандартных, используемых в ПО (LaraCroft например).

2.10. Часы.
-----------
Плата должна содержать энергонезависимые часы/календарь (RTC). 
Программный интерфейс совместимый с Gluk.

3. Форм фактор.
---------------
Наиболее подходящий и перспективный формфактор причем позволяющий использовать стандартные корпуса и
блоки питания (БП) является miniATX.
Также minATX содержит специальное окно для вывода периферийных разьемов, что позволяет разумно разместить 
необходимые периферийные разьемы на плате.

Какие периферийные интерфейсы рекомендуется расположить в окне miniATX:
- PS/2 клавиатура/мышь (сдвоенный разьем);
- видеоинтерфейсы (композитный, RGBS, svideo?, VGA?);
- 3.5 аудио;
- интерфейс джойстика;
- разьем SD карты;
- RS232 (DB9);

Слоты разместить на плате так чтобы они точно распологались для вывода на соответствующие места корпуса.
Причем первым пином (ключом) в сторону выходов корпуса.
Плата NeoGS должна точно вставать в сторону выхода корпуса, 
причем должен быть зазор в 3мм для установки держащей скобы.

4. Питание платы.
-----------------
Как минимум должна быть поддержка следующих типов питания:
- ATX 20pin;
- AT 10pin;
- gnd,+5v,+12v.

Для АТХ должен быть предусмотрен стартующий/выключающий триггер питания от кнопки power, 
не влияющий если сипользуются другие типы питания.

5. Слоты.
---------
Слоты должны поддерживать нормальную работу устройств по стандарту ZXBUS.

6. Правила разработки, обеспечение надежности.
----------------------------------------------
Правила обеспечивающие надежность:
- выходы ФПГА не должны напрямую выводится на интерфейсные разъемы. 
  В случае необходимости буферировать микросхемами логики.
- питание слотов по возможности ограничить самовостонавливающимися предохранителями 
  (во избежание выгорания дорожек платы).


















