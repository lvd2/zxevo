архитектура видеомодов.


1. выбиратор палитры. Работает сразу после инта (или как-то в начале экрана),
   выбирает в режиме 1/8, заполняя только первый ворд буфера. Из того буфера
   напрямую через муксы подключение к памяти палитры (и строб).

2. выбиратор даты на каждую строку. Должен начинать выборку в начале строки, режим - 1/2,
   выбирает весь буфер. После этого стробом дата копируется куда надо.

3. Адресный указатель для п.1 и п.2 общий, ресетится перед выборкой палитры.

4. Фетчер видеодаты строки. Стартует в обычном месте минус скролл влево (в единицах 7МГц).
   Работает в режиме 1/2 (все кроме текстмода) или 1/4 (текстмод). В текстмоде должен заполнять
   только половину буфера. Имеет 2 указателя, которые используются в dpf и текстмоде.

5. рендерер. Рисует 256ц (с хамом?) или 16ц 640x или dpf или текстмод. Для dpf должен уметь
   обменивать потоки и задерживать один из них на 0..3 пикселя. Для dual window нужен счётчик
   до середины экрана (не скроллнутого!). Для текстмода фетч должен стартовать на символ раньше
   (и ещё раньше если скрлл влево) и код символа пропускаться через фонтпзу. В этом случае атрибуты
   будут по адресам +1 к тексту.

6. как юзается палитра в разных модах. Можно поделить так: по 64 на каждый мод. Тогда режим
   байт на точку будет 64ц (2 бита свободны). Можно заюзать под хам.