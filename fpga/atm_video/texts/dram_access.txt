Доступ к памяти - по 16 бит (видео), 16 бит (процессор читает), 8 бит (процессор пишет).

доступ для видео группируется в блоки по 8 циклов памяти.
В блоке видео выбирается 1, 2, 4 или все 8 циклов, остальные циклы (если остаются)
идут для процессора. Если никто на цикл не претендует - цикл рефреша (CBR).
Выборка видео в блоке распределяется свободно: процессору предоставляется цикл, пока
есть возможность (если за остающиеся циклы блока можно выбрать все видеоданные).


используются 2 мсх памяти DRAM 1Mx16, 10 RAS- и 10 CAS-адресов,
итого 4 мегабайта (A21-A0 для байтовой адресации)

распределение памяти по мсх (в условных байтовых адресах A0,A1,...):
2 байта из 16 бит - имеют соседние адреса (A0). A1 - выбор одной из мсх памяти.
RAS-адреса - A11-A2, CAS-адреса - A21-A12. Для вордовой адресации аналогично, A0 - выбор чипа,
A10-A1 - RAS, A20-A11 - CAS.


видео выбирается по 16 бит, в отличие от спектрумов.
Для 6912-режима используются блоки с BW=1/8 (см. video-modes.txt),
и выборка начинается за 16 lowres пикселей до вывода картинки. В каждом блоке
выбирается или 2 байта (1 слово) пикселей, или 2 байта (1 слово) атрибутов.

16c-lowres: pentagon16c- и atm-modes выбирают данные сразу из 4 разных адресов,
BW=1/4, выборка стартует за 16 lowres до картинки. В каждом блоке выбирается 2 слова по 16 бит.

16с-hires, 256c-lowres - BW=1/2, выборка за 8 lowres до картинки???? (undefined!) scroll???
16+16c lowres: ???? scroll??? (2 playfields)


адресация в модуле arbiter.v и dram.v - вордовая.

Процессор: поступает запрос на каком-либо клоке fclk=28MHz (Fpga CLocK). Запрос сопровождается
адресом, режимом (rnw - Read or Not Write; =1 - read, =0 - write), и данными для записи (если
речь про запись), включающими в себя адрес и выбор байта в ворде. При чтении данные выдаются
через некоторое время (сразу весь ворд). Для определения времени готовности операции
служит счётчик, отсчитывающий кол-во fclk тактов до готовности, а также сигнал stall, который говорит
о том, что идёт блочный доступ к памяти с BW=1 и процессору она не будет доступна неопределённое время.
Для чтения: cчётчик считает до появления сигнала готовности и данных (конец цикла записи)
Для записи: счётчик считает до начала цикла записи.




