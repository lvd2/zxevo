формат и адреса регистров на spi-шине avr<>fpga.

напоминаю, установка номера - при spics_n=1, далее в 0 и шлём байт (1 или
несколько).


Статус подготавливается к выдаче (лочится) в момент spics_n 0->1.
Cтатус: (считывается при spics_n=1 в момент записи номера):
bit.7 - Read-Not-Write (rnw): =1 - спектрум заваитился на чтении, =0 - на записи.
bits.6..0 - какой девайс заваитил, если =1. Пока есть
 bit.0 - если 1, заваитили глюк-часы.

Чтобы только считать статус - надо сгенерировать фронт spics_n 0->1.
Если spics_n был в 1 - надо его передёрнуть.


после передерга spics_n 0->1 номер заново надо ставить.


регистр $00 - дефолтный номер, в него можно писать, это пойдёт в
игнор. Устанавливается автоматически в момент spics_n 0->1


регистр $10 - данные для клавиатуры (40 бит сдвиговый рег), запоминаются
              последние 40 вдвинутых битов.
регистр $11 - в момент spics_n 0->1 с этим установленным регистром
уходят данные в рабочий регистр клавиатуры (то, что записано было в $10).

регистр $20 - X coord мыши
        $21 - Y coord мыши
        $22 - кнопки мыши
	$23 - кемстон жойстик


каждый из регистров уходит в спектрум по факту spics_n 0->1

регистр $30 - регистр сброса - задает сам факт сброса Z80 и страничку пзу, в
которую сброситься. $30[5:4] задают номер страницы, куда сброситься. Факт
сброса - spics_n 0->1


часики:

$41 - регистр чтения адреса, который был установлен спектрумом для глюкочасов.

$40 - регистр чтения-записи данных, которые ожидает спектрум в ваите. То, что
в него пишется - идёт в спектрум, если тот ваитится на чтении, или же из этого
регистра считывается то, что спектрумом записано, если тот ваитится на записи.
После обмена, в момент spics_n 0->1 спектрум разваитивается, прерывание на
аврку снимается, из статуса битик обнуляется.

регистр $40 общий для всех ваит-портов


Конфиг - регистры:

config0: $50 - только на запись:

         бит 0 - включение ВГА (=1) регистр актуализируется после записи данных по фронту spics_n 0->1.

         бит 1 - подача нми. если =1 - nmi_n=0, если =0 - nmi_n=Z
