
        Прошивальщик Flash-ROM

------------------------------------------------------------------------------

Использование
~~~~~~~~~~~~~
описано в документе docs\ZXEvo_rescue_flasher.odt

------------------------------------------------------------------------------

FPGA\
fpga.qpf        - проект (Quartus v6.1)
fpga.qws
main.dpf
main.qsf
main.v          - главный исходник
lpm_ram_dp0.v
lpm_rom0.v
zx_font.hex     - шрифт
zx_font.bmp     - содержимое zx_font.hex в виде картинки
main.rbf        - выходной файл

AVR\
evoflash.asm    - главный исходник
_macros.asm
m128def.inc
version.txt     - название прошивки (до 12 симв.)

clean.bat
make.bat        - коммандный файл для
                  компилляции AVR части и
                  сборки проекта.

zxevo_fw.bin    - собранный проект


Сборка проекта
~~~~~~~~~~~~~~
1. Компиллируем в Quartus-е FPGA часть проекта (получаем файл main.rbf).
2. Запускаем MAKE.BAT (компиллируем AVR часть и собираем проект).

При сборке используются следующие программы:
tools\mhmt\mhmt.exe
tools\bin2avr\bin2avr.exe
tools\avra\avra.exe
tools\make_fw\make_fw.exe


------------------------------------------------------------------------------

INFO
~~~~
Реализована концепция аварийного программатора Flash-ROM
в виде самостоятельной конфигурации.

При старте флешер ищет на SD файл ZXEVO.ROM.
Если всё в порядке полностью стирает Flash-ROM
и пишет данные из файла.
После записи делается проверка (побайтное сравнение).

Следить за процессом работы можно на экране телевизора и
терминалом через RS-232 (115200-N-8).

Размер файла может быть от 1 байта до 512Кб.
Пишется блоками по 512 байт. Если размер файла не кратен 512,
пишется мусор из сектора (то, что прочиталось с SD).

------------------------------------------
В дальнейшем этот флешер войдёт
в состав сервисной прошивки(конфигурации).
(я надеюсь... :)